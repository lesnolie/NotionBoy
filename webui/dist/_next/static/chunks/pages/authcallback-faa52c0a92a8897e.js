(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{9263:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/authcallback",function(){return t(9849)}])},9849:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var n=t(1527),r=t(9300),i=t(4157),c=t(6131),o=t(3125),a=t(959);function l(){let[e,s]=(0,a.useState)(!1),[t,l]=(0,a.useState)(!0),[u,d]=(0,a.useState)(""),h=(0,o.useRouter)();return(0,a.useEffect)(()=>{let e={code:h.query.code,state:h.query.state};if(!h.isReady){l(!0);return}console.log("req is in useEffect ".concat(JSON.stringify(e))),i.t.OAuthCallback(e).then(e=>{console.log("get token: ".concat(e)),e.token&&(c.Z.set("token",e.token,{expires:new Date(e.expiry)}),c.Z.set("tokenExpire",e.expiry,{expires:new Date(e.expiry)})),s(!0),h.push(r.J.links.home),l(!1)}).catch(e=>{console.log("Get token failed",e),d(e.message),l(!1)})},[h.isReady]),(0,n.jsx)("div",{className:"container mx-auto p-8 ",children:(0,n.jsxs)("article",{className:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl",children:[!t&&e&&(0,n.jsx)("h1",{children:"Redirecting..."}),!t&&!e&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Login Failed"}),(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-red-500",children:[(0,n.jsx)("strong",{children:"Error Message:"})," ",u]})})]}),t&&(0,n.jsx)("h1",{children:"Validating..."})]})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9263)}),_N_E=e.O()}]);
