(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{9791:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return r(953)}])},953:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(1527),o=r(959),s=r(7559),a=r.n(s),c=r(6380);let i=Array(64),l=Array(123);for(let e=0;e<64;)l[i[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;function u(e,t){return t&&t.constructor===Uint8Array?function(e,t,r){let n=null,o=[],s=0,a=0,c;for(;t<r;){let r=e[t++];switch(a){case 0:o[s++]=i[r>>2],c=(3&r)<<4,a=1;break;case 1:o[s++]=i[c|r>>4],c=(15&r)<<2,a=2;break;case 2:o[s++]=i[c|r>>6],o[s++]=i[63&r],a=0}s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,o)),s=0)}return(a&&(o[s++]=i[c],o[s++]=61,1===a&&(o[s++]=61)),n)?(s&&n.push(String.fromCharCode.apply(String,o.slice(0,s))),n.join("")):String.fromCharCode.apply(String,o.slice(0,s))}(t,0,t.length):t}function d(e,t){let{pathPrefix:r,...n}=t||{},o=r?"".concat(r).concat(e):e;return fetch(o,n).then(e=>e.json().then(t=>{if(!e.ok)throw t;return t}))}function h(e){return["string","number","boolean"].some(t=>typeof e===t)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).reduce((n,o)=>{let s=t[o],a=r?[r,o].join("."):o,c=Array.isArray(s)&&s.every(e=>h(e))&&s.length>0,i=h(s)&&!(!1===s||0===s||""===s),l={};return!function(e){let t="Object"===Object.prototype.toString.call(e).slice(8,-1);if(!(null!==e&&t)||!t)return!1;let r=Object.getPrototypeOf(e),n="object"==typeof r&&r.constructor===Object.prototype.constructor;return n}(s)?(i||c)&&(l={[a]:s}):l=e(s,a),{...n,...l}},{})}(e),n=Object.keys(r).reduce((e,n)=>{let o=r[n];return t.find(e=>e===n)?e:Array.isArray(o)?[...e,...o.map(e=>[n,e.toString()])]:e=[...e,[n,o.toString()]]},[]);return new URLSearchParams(n).toString()}class m{static Status(e,t){return d("/v1/status?".concat(f(e,[])),{...t,method:"GET"})}static GenrateToken(e,t){return d("/v1/auth/token",{...t,method:"POST"})}static GenerateApiKey(e,t){return d("/v1/auth/apikey",{...t,method:"POST"})}static DeleteApiKey(e,t){return d("/v1/auth/apikey",{...t,method:"DELETE"})}static CreateConversation(e,t){return d("/v1/conversations",{...t,method:"POST",body:JSON.stringify(e,u)})}static GetConversation(e,t){return d("/v1/conversations/".concat(e.id,"?").concat(f(e,["id"])),{...t,method:"GET"})}static ListConversations(e,t){return d("/v1/conversations?".concat(f(e,[])),{...t,method:"GET"})}static DeleteConversation(e,t){return d("/v1/conversations/".concat(e.id),{...t,method:"DELETE"})}static CreateMessage(e,t){return d("/v1/conversations/".concat(e.conversationId,"/messages"),{...t,method:"POST",body:JSON.stringify(e,u)})}static GetMessage(e,t){return d("/v1/conversations/".concat(e.conversationId,"/messages/").concat(e.id,"?").concat(f(e,["conversationId","id"])),{...t,method:"GET"})}static ListMessages(e,t){return d("/v1/conversations/".concat(e.conversationId,"/messages?").concat(f(e,["conversationId"])),{...t,method:"GET"})}static DeleteMessage(e,t){return d("/v1/conversations/".concat(e.conversationId,"/messages/").concat(e.id),{...t,method:"DELETE"})}}function v(){let[e,t]=(0,o.useState)([]),r=e=>{""!==s&&(e.preventDefault(),i(""),m.CreateConversation({}).then(e=>{console.log(e)}),m.Status("").then(e=>{console.log(e)}),t(e=>[...e,{id:e.length,text:s}]),i(""))},[s,i]=(0,o.useState)(""),l=(0,o.useRef)(null);return(0,o.useEffect)(()=>{l.current.scrollTop=l.current.scrollHeight},[e]),(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:"Chat"})}),(0,n.jsx)("main",{ref:l,className:"flex-1 overflow-auto w-full flex flex-col",children:(0,n.jsx)("div",{className:"flex-1 border border-blue-400 m-4",children:(0,n.jsx)("div",{className:"flex flex-col",children:e.map(e=>{var t;return(0,n.jsx)("div",{className:"prose text-sm max-w-none p-1 rounded-lg shadow-lg mb-4 word-warp break-words\n                ".concat(e.id%2==0?"mr-5  bg-green-100 md:mr-10":"ml-5  bg-blue-100 md:ml-10 "),dangerouslySetInnerHTML:(t=e.text,{__html:(0,c.TU)(t)})},e.id)})})})}),(0,n.jsxs)("div",{className:" w-full h-24 border border-blue-400 flex flex-row ",children:[(0,n.jsx)("textarea",{placeholder:"Type your message here. Press Shift + Enter to send.",className:"stretch flex-1 h-24 border border-blue-400 p-2",value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&e.shiftKey&&r(e)}}),(0,n.jsx)("button",{className:"w-20 h-24 border bg-red-200",onClick:e=>r(e),children:"Send Message"})]})]})}}},function(e){e.O(0,[957,774,888,179],function(){return e(e.s=9791)}),_N_E=e.O()}]);
