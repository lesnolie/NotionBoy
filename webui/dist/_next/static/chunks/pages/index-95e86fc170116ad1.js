(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5308:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(8785)}])},3933:function(e,t,a){"use strict";a.d(t,{c_:function(){return m},kk:function(){return f},o3:function(){return u}});var r=a(1527),n=a(9300),o=a(4379),s=a(4157),i=a(6131),l=a(3125),d=a(959),c=a(4271);let u="token",f="tokenExpire",h=n.J.authPages;function m(){let[e,t]=(0,d.useState)(null),[a,m]=(0,d.useState)(""),[p,g]=(0,d.useState)(!0),b=(0,l.useRouter)(),{toast:v}=(0,o.pm)();(0,d.useEffect)(()=>{if(b.isReady){b.pathname==n.J.links.login&&g(!1);let e=i.Z.get(u);e&&t(e),y()}},[b.isReady]),(0,d.useEffect)(()=>{a&&v({variant:"destructive",title:"Auth error",description:a})},[a]);let y=()=>{for(let e of h)if(b.pathname.startsWith(e)){let e=i.Z.get(f),a=Date.parse(e)-Date.now();a<0?(i.Z.remove(u),i.Z.remove(f)):a<3600?s.t.GenrateToken({}).then(e=>{e.token?(i.Z.set(u,e.token,{expires:new Date(e.expiry)}),i.Z.set(f,e.expiry,{expires:new Date(e.expiry)}),t(e.token)):(m("Get token failed"),k())}).catch(e=>{m("Get token failed ".concat(e)),k()}):t(i.Z.get(u))}},x=()=>{i.Z.remove(u),i.Z.remove(f),b.push(n.J.links.home),b.reload()},k=()=>{b.push(n.J.links.login)};return(0,r.jsx)(r.Fragment,{children:(()=>{if(p)return e?(0,r.jsx)(c.z,{variant:"ghost",size:"sm",onClick:x,children:"Logout"}):(0,r.jsx)(c.z,{variant:"ghost",size:"sm",onClick:k,children:"Login"})})()})}},4271:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var r=a(1527),n=a(959),o=a(1590),s=a(9140);let i=(0,o.j)("active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:hover:bg-slate-800 dark:hover:text-slate-100 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800",{variants:{variant:{default:"bg-slate-900 text-white hover:bg-slate-700 dark:bg-slate-50 dark:text-slate-900",destructive:"bg-red-500 text-white hover:bg-red-600 dark:hover:bg-red-600",outline:"bg-transparent border border-slate-200 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-100",subtle:"bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100",ghost:"bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent",link:"bg-transparent dark:bg-transparent underline-offset-4 hover:underline text-slate-900 dark:text-slate-100 hover:bg-transparent dark:hover:bg-transparent"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-2 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:a,variant:n,size:o,...l}=e;return(0,r.jsx)("button",{className:(0,s.cn)(i({variant:n,size:o,className:a})),ref:t,...l})});l.displayName="Button"},9300:function(e,t,a){"use strict";function r(e){return e+".html"}a.d(t,{J:function(){return n}});let n={name:"NotionBoy",description:"NotionBoy is a note app base on Notion. It's a web app, you can use it in your browser.",links:{twitter:"https://twitter.com/LiuVaayne",github:"https://github.com/vaayne/NotionBoy",chatgpt:r("/chat"),login:r("/login"),home:"/",authCallback:r("/authcallback")},authPages:[r("/chat")]}},4157:function(e,t,a){"use strict";a.d(t,{t:function(){return c}});let r=Array(64),n=Array(123);for(let e=0;e<64;)n[r[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;function o(e,t){return t&&t.constructor===Uint8Array?function(e,t,a){let n=null,o=[],s=0,i=0,l;for(;t<a;){let a=e[t++];switch(i){case 0:o[s++]=r[a>>2],l=(3&a)<<4,i=1;break;case 1:o[s++]=r[l|a>>4],l=(15&a)<<2,i=2;break;case 2:o[s++]=r[l|a>>6],o[s++]=r[63&a],i=0}s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,o)),s=0)}return(i&&(o[s++]=r[l],o[s++]=61,1===i&&(o[s++]=61)),n)?(s&&n.push(String.fromCharCode.apply(String,o.slice(0,s))),n.join("")):String.fromCharCode.apply(String,o.slice(0,s))}(t,0,t.length):t}function s(e,t){let{pathPrefix:a,...r}=t||{},n=a?"".concat(a).concat(e):e;return fetch(n,r).then(e=>e.json().then(t=>{if(!e.ok)throw t;return t}))}async function i(e,t,a){var r;let{pathPrefix:n,...o}=a||{},s=n?"".concat(n).concat(e):e,i=await fetch(s,o);if(!i.ok){let e=await i.json(),t=e.error&&e.error.message?e.error.message:"";throw Error(t)}if(!i.body)throw Error("response doesnt have a body");await i.body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({start(e){e.buf="",e.pos=0},transform(e,t){for(void 0===t.buf&&(t.buf=""),void 0===t.pos&&(t.pos=0),t.buf+=e;t.pos<t.buf.length;)if("\n"===t.buf[t.pos]){let e=t.buf.substring(0,t.pos),a=JSON.parse(e);t.enqueue(a.result),t.buf=t.buf.substring(t.pos+1),t.pos=0}else++t.pos}})).pipeTo((r=e=>{t&&t(e)},new WritableStream({write(e){r(e)}})))}function l(e){return["string","number","boolean"].some(t=>typeof e===t)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=function e(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).reduce((r,n)=>{let o=t[n],s=a?[a,n].join("."):n,i=Array.isArray(o)&&o.every(e=>l(e))&&o.length>0,d=l(o)&&!(!1===o||0===o||""===o),c={};return!function(e){let t="Object"===Object.prototype.toString.call(e).slice(8,-1);if(!(null!==e&&t)||!t)return!1;let a=Object.getPrototypeOf(e),r="object"==typeof a&&a.constructor===Object.prototype.constructor;return r}(o)?(d||i)&&(c={[s]:o}):c=e(o,s),{...r,...c}},{})}(e),r=Object.keys(a).reduce((e,r)=>{let n=a[r];return t.find(e=>e===r)?e:Array.isArray(n)?[...e,...n.map(e=>[r,e.toString()])]:e=[...e,[r,n.toString()]]},[]);return new URLSearchParams(r).toString()}class c{static Status(e,t){return s("/v1/status?".concat(d(e,[])),{...t,method:"GET"})}static GenrateToken(e,t){return s("/v1/auth/token",{...t,method:"POST",body:JSON.stringify(e,o)})}static OAuthURL(e,t){return s("/v1/auth/url/".concat(e.provider,"?").concat(d(e,["provider"])),{...t,method:"GET"})}static OAuthCallback(e,t){return s("/v1/auth/callback",{...t,method:"POST",body:JSON.stringify(e,o)})}static GenerateApiKey(e,t){return s("/v1/auth/apikey",{...t,method:"POST"})}static DeleteApiKey(e,t){return s("/v1/auth/apikey",{...t,method:"DELETE"})}static CreateConversation(e,t){return s("/v1/conversations",{...t,method:"POST",body:JSON.stringify(e,o)})}static UpdateConversation(e,t){return s("/v1/conversations/".concat(e.id),{...t,method:"PUT",body:JSON.stringify(e,o)})}static GetConversation(e,t){return s("/v1/conversations/".concat(e.id,"?").concat(d(e,["id"])),{...t,method:"GET"})}static ListConversations(e,t){return s("/v1/conversations?".concat(d(e,[])),{...t,method:"GET"})}static DeleteConversation(e,t){return s("/v1/conversations/".concat(e.id),{...t,method:"DELETE"})}static CreateMessage(e,t,a){return i("/v1/conversations/".concat(e.conversationId,"/messages"),t,{...a,method:"POST",body:JSON.stringify(e,o)})}static GetMessage(e,t){return s("/v1/conversations/".concat(e.conversationId,"/messages/").concat(e.id,"?").concat(d(e,["conversationId","id"])),{...t,method:"GET"})}static ListMessages(e,t){return s("/v1/conversations/".concat(e.conversationId,"/messages?").concat(d(e,["conversationId"])),{...t,method:"GET"})}static DeleteMessage(e,t){return s("/v1/conversations/".concat(e.conversationId,"/messages/").concat(e.id),{...t,method:"DELETE"})}}},8785:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var r=a(1527),n=a(959),o=a(7765),s=a.n(o),i=a(9300),l=a(4242),d=a(1590),c=a(1308),u=a(9140);let f=n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.jsxs)(l.fC,{ref:t,className:(0,u.cn)("relative z-10 flex flex-1 items-center justify-center",a),...o,children:[n,(0,r.jsx)(y,{})]})});f.displayName=l.fC.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(l.aV,{ref:t,className:(0,u.cn)("group flex flex-1 list-none items-center justify-center",a),...n})});h.displayName=l.aV.displayName;let m=l.ck,p=(0,d.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:bg-slate-100 disabled:opacity-50 dark:focus:bg-slate-800 disabled:pointer-events-none bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-slate-50 dark:data-[state=open]:bg-slate-800 data-[active]:bg-slate-50 dark:data-[active]:bg-slate-800 h-10 py-2 px-4 group w-max"),g=n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.jsxs)(l.xz,{ref:t,className:(0,u.cn)(p(),"group",a),...o,children:[n," ",(0,r.jsx)(c.Z,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]})});g.displayName=l.xz.displayName;let b=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(l.VY,{ref:t,className:(0,u.cn)("top-0 left-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=to-start]:slide-out-to-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=from-end]:slide-in-from-right-52 md:absolute md:w-auto ",a),...n})});b.displayName=l.VY.displayName;let v=l.rU,y=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{className:(0,u.cn)("absolute left-0 top-full flex justify-center"),children:(0,r.jsx)(l.l_,{className:(0,u.cn)("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border border-slate-200 bg-white shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:zoom-in-90 data-[state=closed]:zoom-out-95 dark:border-slate-700 dark:bg-slate-800 md:w-[var(--radix-navigation-menu-viewport-width)]",a),ref:t,...n})})});y.displayName=l.l_.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(l.z$,{ref:t,className:(0,u.cn)("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=visible]:fade-in data-[state=hidden]:fade-out",a),...n,children:(0,r.jsx)("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-slate-200 shadow-md dark:bg-slate-800"})})});function k(){return(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(f,{children:(0,r.jsx)(h,{children:(0,r.jsxs)(m,{children:[(0,r.jsx)(s(),{href:"/",legacyBehavior:!0,passHref:!0,children:(0,r.jsx)(v,{className:p(),children:(0,r.jsx)("span",{className:"font-bold",children:i.J.name})})}),(0,r.jsx)(s(),{href:i.J.links.chatgpt,legacyBehavior:!0,passHref:!0,children:(0,r.jsx)(v,{className:p(),children:(0,r.jsx)("span",{className:"font-bold",children:"Chat"})})})]})})})})}x.displayName=l.z$.displayName;var w=a(3933);function j(){return(0,r.jsxs)("header",{className:"flex items-center justify-between md:sticky top-0 w-full  border-b border-b-slate-200 bg-white dark:border-b-slate-700 dark:bg-slate-900",children:[(0,r.jsx)(k,{}),(0,r.jsx)(w.c_,{})]})}function N(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{}),(0,r.jsx)("div",{className:"flex-grow container mx-auto prose p-8",children:(0,r.jsx)("h1",{children:"Welcome to NotionBoy"})})]})}}},function(e){e.O(0,[765,703,774,888,179],function(){return e(e.s=5308)}),_N_E=e.O()}]);
