(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{4699:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(5828)}])},5828:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return f}});var n=t(1527),s=t(3933),l=t(4271),r=t(4624),a=t(9300),c=t(4379),o=t(4157),u=t(6131),d=t(7765),h=t.n(d),m=t(3125),x=t(959);function f(){let e=(0,m.useRouter)(),{toast:i}=(0,c.pm)(),[t,d]=(0,x.useState)([]),[f,g]=(0,x.useState)(!1),[p,w]=(0,x.useState)(""),v=[{id:"github",name:"Github"}];(0,x.useEffect)(()=>{N(),f||v.forEach(async e=>{let i=await o.t.OAuthURL({provider:e.id});e.url=i.url,d([...t,e])})},[]);let N=()=>{let e=u.Z.get(s.o3);if(void 0==e){g(!1);return}g(!0)};if(f)return(0,n.jsx)("div",{className:"flex-grow container mx-auto flex flex-col p-8 items-center",children:(0,n.jsx)("div",{className:"prose m-4",children:(0,n.jsx)("h1",{children:"You are already logged in!"})})});let j=t=>{o.t.GenrateToken({magicCode:t}).then(i=>{u.Z.set(s.o3,i.token),u.Z.set(s.kk,i.expiry),g(!0),e.push(a.J.links.home)}).catch(e=>{i({variant:"destructive",title:"Login with MagicCode error",description:JSON.stringify(e)})})};return(0,n.jsxs)("div",{className:"flex-grow container mx-auto flex flex-col p-8 items-center",children:[(0,n.jsx)("div",{className:"prose m-4",children:(0,n.jsx)("h1",{children:"Please Login"})}),(0,n.jsxs)("div",{className:"container mx-auto max-w-sm flex flex-col bg-white p-4 items-center",children:[t.map(e=>void 0===e.url?(0,n.jsxs)(l.z,{disabled:!0,children:["Sign In with ",e.name]},e.id):(0,n.jsx)(h(),{href:e.url,className:"w-full m-2",children:(0,n.jsxs)(l.z,{className:"w-full",children:["Sign In with ",e.name]})},e.id)),(0,n.jsxs)("div",{className:"flex w-full max-w-sm items-center space-x-2",children:[(0,n.jsx)(r.I,{type:"text",placeholder:"Login with MagicCode",value:p,onChange:e=>w(e.target.value)}),(0,n.jsx)(l.z,{type:"submit",onClick:()=>j(p),children:"Login"})]})]})]})}}},function(e){e.O(0,[765,477,774,888,179],function(){return e(e.s=4699)}),_N_E=e.O()}]);
